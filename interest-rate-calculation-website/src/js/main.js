// Import the necessary modules
import { calculateAmount } from './calculator.js';
import { addPerson, getAllPersons } from './data.js';

// Get the form elements
const nameInput = document.getElementById('name');
const borrowingDateInput = document.getElementById('borrowing-date');
const returnDateInput = document.getElementById('return-date');
const submitButton = document.getElementById('submit');

// Add event listener to the submit button
submitButton.addEventListener('click', () => {
  // Get the input values
  const name = nameInput.value;
  const borrowingDate = borrowingDateInput.value;
  const returnDate = returnDateInput.value;

  // Calculate the amount
  const amount = calculateAmount(borrowingDate, returnDate);

  // Add the person's information to the data
  addPerson(name, borrowingDate, returnDate, amount);

  // Clear the form inputs
  nameInput.value = '';
  borrowingDateInput.value = '';
  returnDateInput.value = '';

  // Display the updated list of persons
  displayPersons();
});

// Function to display the list of persons
function displayPersons() {
  // Get the container element
  const container = document.getElementById('persons-container');

  // Clear the container
  container.innerHTML = '';

  // Get all persons
  const persons = getAllPersons();

  // Create and append the person elements to the container
  persons.forEach(person => {
    const personElement = document.createElement('div');
    personElement.textContent = `Name: ${person.name}, Borrowing Date: ${person.borrowingDate}, Return Date: ${person.returnDate}, Amount: ${person.amount}`;
    container.appendChild(personElement);
  });
}

// Call the displayPersons function to initially display the list of persons
displayPersons();